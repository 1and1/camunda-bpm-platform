<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" data-ng-app="cycle">
  <head th:substituteby="fragment/common :: head">

  </head>
  <body data-ng-controller="DefaultController">
    <div class="wrapper">
	    <div th:substituteby="fragment/common :: navigation-logged-in"></div>
	    <div class="container-fluid content-container">
          <div th:substituteby="fragment/common :: breadcrumbs"></div>
          <div th:substituteby="fragment/common :: error-panel"></div>          
	      <div class="row-fluid content-container">
	        <div class="span12" data-ng-controller="ConnectorSetupController">
              <table class="table">
                  <thead>
                      <tr>
                          <th>Connector Id</th>
                          <th>Connector Name</th>
                          <th>Plugin Name</th>
                          <th>Login Mode</th>
                          <th>Action</th>
                      </tr>
                  </thead>
                  <tbody>
                      <tr data-ng-repeat="connectorConfiguration in connectorConfigurations" data-ng-cloak>
                          <td>{{connectorConfiguration.connectorId}}</td>
                          <td>{{connectorConfiguration.name}}</td>
                          <td>{{connectorConfiguration.connectorName}}</td>
                          <td>{{connectorConfiguration.loginMode}}</td>
                          <td>
                            <a data-ng-click="deleteConnector(connectorConfiguration)" th:text="#{delete}">delete</a>
                            <br />
                            <a data-ng-click="editConnector(connectorConfiguration)" th:text="#{edit}">edit</a>
                          </td>
                      </tr>
                  </tbody>
              </table>
              <a class="btn" data-ng-click="createNewConnector()"><span th:text="#{New}">New</span></a>
               
               <!-- begin add/edit-connector-configuration-dialog -->
               <dialog model="createNewConnectorDialog" ng-cloak>
               <div class="modal hide fade" data-ng-controller="CreateNewConnectorController" data-ngm-if="createNewConnectorDialog.renderHtml()"> 
                 <div class="modal-header">
                   <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                   <h3 data-ng-show="connectorDialogMode == 'ADD_CONNECTOR'" th:text="#{'Add connector'}"></h3>
                   <h3 data-ng-show="connectorDialogMode == 'EDIT_CONNECTOR'" th:text="#{'Edit connector'}"></h3>
                 </div>
                 <div class="modal-body">
                   <div class="alert alert-error" data-ng-show="error">
                     <button type="button" class="close" data-dismiss="alert">&times;</button>
                     <span>
                       <strong th:text="#{A problem occured:}"></strong>
                       {{error.message}}
                     </span>
                   </div>
                   <form class="form-horizontal" novalidate data-ng-submit="save()" name="editConnectorConfigForm">
                     <fieldset>
                       <div class="control-group">                   
                         <label class="control-label" for="connectorLabel" 
                                th:text="#{'Connector Name*'}">Connector Name*</label>
                         <div class="controls" style="margin-bottom: 10px;" >                            
                          <input id="connectorLabel" name="connectorLabel" type="text" class="span8" required data-ng-model="editConnectorConfiguration.name"/>
                         </div>
                       </div>
                       
                       <div class="control-group">                   
                         <label class="control-label" for="loginMode" 
                                th:text="#{'Select Login Mode*'}">Select Login Mode*</label>
                         <div class="controls" style="margin-bottom: 10px;" >                            
                           <span class="nullable">
                             <select id="loginMode" class="span8" data-required data-ng-model="editConnectorConfiguration.loginMode">
                               <option value="">Select...</option>                             
                               <option value="LOGIN_NOT_REQUIRED">no login required</option>
                               <option value="GLOBAL">credentials provided globally</option>
                               <option value="USER">credentials provided by user</option>
                             </select>
                           </span>                
                         </div>
                       </div>
  
                       <div data-ng-switch data-on="editConnectorConfiguration.loginMode">
                         <div data-ng-switch-when="GLOBAL">
                           <div class="control-group">                   
                             <label class="control-label" for="userName" 
                                    th:text="#{'User Name*'}">User Name*</label>
                             <div class="controls" style="margin-bottom: 10px;" >                                
                              <input id="userName" name="userName" type="text" class="span8" required data-ng-model="editConnectorConfiguration.user"/>
                             </div> 
                           </div>
                           <div class="control-group">                   
                             <label class="control-label" for="password" 
                                    th:text="#{'Password*'}">Password*</label>
                             <div class="controls" style="margin-bottom: 10px;" >                                
                              <input id="password" name="password" type="text" class="span8" required data-ng-model="editConnectorConfiguration.password"/>
                             </div> 
                           </div>
                         </div>
                       </div>
                       <div class="control-group">                   
                         <label class="control-label" for="connectors" 
                                th:text="#{'Select Plugin*'}">Select Plugin*</label>
                         <div class="controls" style="margin-bottom: 10px;" >
                            <select id="connectors" class="span8" data-required data-ng-options="c.name for c in connectorConfigurations" data-ng-model="connectorConfigurationBlueprint">
                              <option value="">Select...</option>
                            </select>
                         </div>
                       </div>
                       <div class="control-group" data-ng-repeat="(key, value) in editConnectorConfiguration.properties" data-ng-model="editConnectorConfiguration.properties">
                         <label class="control-label" for="specificField" 
                                data-help
                                data-help-text-var="currentHelpText(key)"
                                data-help-title-var="key">{{key}}</label>
                          <div class="controls" style="margin-bottom: 10px;" >
                            <input id="specificField" name="specificField" type="text" class="span8" data-ng-model="editConnectorConfiguration.properties[key]"/>
                          </div>
                       </div>                    
                     </fieldset>
                   </form>
                 </div>
                 <div class="modal-footer">
                   <button class="btn" data-ng-click="createNewConnectorDialog.close()" th:text="#{Cancel}">Cancel</button>
                   <button class="btn btn-primary" th:text="#{Test Connector}">Test Connector</button>
                   <button class="btn btn-primary" data-ng-click="save()" data-ng-disabled="!isValid()" th:text="#{Save}">Save</button>
                 </div>
               </div>
               </dialog>  
               <!-- end add/edit-connector-configuration-dialog -->
               
                <!-- begin delete-connector-configuration-dialog -->
                <dialog model="deleteConnectorConfigurationDialog" ng-cloak>
                <div class="modal hide fade" data-ng-controller="DeleteConnectorConfigurationController" ngm-if="deleteConnectorConfigurationDialog.renderHtml()"> 
                  <div class="modal-header">
                    <button data-ng-show="deleteConnectorConfigurationDialog.autoClosable" type="button" class="close" data-dismiss="modal">&times;</button>
                    <h3 th:text="#{'Delete connector configuration'}"></h3>
                  </div>
                  <div class="modal-body">
                  <div data-ng-switch data-on="toBeDeleted">
                    <div data-ng-switch-when="performConnectorDeletion">
                        <p> 
                         <span th:text="#{'Are you sure you would like to delete the selected connector configuration?'}">
                            Are you sure you would like to delete the selected connector configuration?
                         </span>
                        </p>
                    </div>
                    <div data-ng-switch-when="deletionSuccess">
                        <p> 
                         <span th:text="#{The deletion of the connector configuration was successful.}">
                            The deletion of the connector configuration was successful.
                         </span>
                         </p>
                    </div>
                    <div data-ng-switch-when="deletionFailed">
                        <p>
                          <span th:text="#{The deletion of the connector configuration failed.}">
                            The deletion of the connector failed.
                          </span>
                        </p>
                    </div>
                  </div>
                  </div>
                  <div class="modal-footer">
                    <button class="btn"      
                            data-ng-show="toBeDeleted == 'performConnectorDeletion'"
                            data-ng-click="deleteConnectorConfigurationDialog.close()">Cancel</button>
                    <button class="btn btn-primary"
                            data-ng-show="toBeDeleted == 'deletionSuccess' || toBeDeleted == 'deletionFailed'" 
                            data-ng-click="deleteConnectorConfigurationDialog.close()">OK</button>
                    <button class="btn btn-primary"
                            data-ng-show="toBeDeleted == 'performConnectorDeletion'" 
                            data-ng-click="performConnectorDeletion()">Delete</button>
                  </div>
                </div>
                </dialog>  
                <!-- end delete-connector-configuration-dialog -->
                        
            </div>
	      </div>
	    </div>
	    <div class="push-down"><!-- // --></div> 
    </div>
    <footer th:substituteby="fragment/common :: footer" />
  </body>
</html>
