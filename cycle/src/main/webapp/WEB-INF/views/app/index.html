<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" data-ng-app="cycle">
  <head th:substituteby="fragment/common :: head">

  </head>
  <body ng-controller="DefaultController">
    <div th:substituteby="fragment/common :: navigation-logged-in"></div>
    <div class="container-fluid content-container breadcrumbs">
      <div class="row-fluid">
        <div class="span12">
          <div>
            <ul class="breadcrumb">
              <li>
                <a href="#/">Home</a> 
              </li>	   	  	
              <li ng-repeat="breadCrumb in breadCrumbs" ng-cloak>
                <span class="divider">/</span> 
                <a href="#{{breadCrumb.href}}">{{breadCrumb.name}}</a>
              </li>	    
            </ul>
          </div>
        </div>
      </div>
      <div class="row-fluid content-container">
        <div class="span3" id="navigation">
          <div class="well sidebar-nav" id="roundtrip-list" ng-controller="ListRoundtripsController">
            <ul class="nav nav-list" id="roundtrip-links">
              <li class="nav-header" th:text="#{My Roundtrips}">My Roundtrips</li>
              <li ng-repeat="roundtrip in roundtrips" class="roundtrip-link-{{roundtrip.id}}" ng-class="activeClass(roundtrip)" ng-cloak>
                <a ng-click="selectRoundtrip(roundtrip)" href="#/roundtrip/{{roundtrip.id}}" title="Inspect {{roundtrip.name}}">{{roundtrip.name}}</a>
              </li>
              <li><a class="btn" ng-click="createNew()" style="margin-top: 30px; display: inline-block"><span th:text="#{Create new}">Create new</span></a></li>
            </ul>
            <!-- begin create-roundtrip-dialog -->
            <dialog model="newRoundtripDialog" ng-cloak>
              <div class="modal" ng-controller="CreateNewRoundtripController" ngm-if="newRoundtripDialog.renderHtml()">
                <div class="modal-header">
                  <a class="close" data-dismiss="modal">&times;</a>
                  <h3 th:text="#{Create roundtrip}">Create roundtrip</h3>
                </div>
                <div class="modal-body">
                  <div class="alert alert-error" ng-show="error">
                    <button type="button" class="close" data-dismiss="alert">&times;</button>
                    <span ng-switch ng-switch-on="error.component"> 
                      <strong ng-switch-when="name-check"
                              th:text="#{A problem occured when trying to check your input}"></strong>
                      
                      <strong ng-switch-default th:text="#{A problem occured}"></strong>
                    </span> {{error.message}}
                  </div>
                  <form class="form-horizontal" novalidate ng-submit="save()" name="newRoundtripForm">
                    <fieldset>
                      <div class="control-group" ng-class="errorClass(newRoundtripForm)">
                        <label class="control-label" for="roundtripName" th:text="#{Name}">Name</label>
                        <div class="controls">
                          <input ng-model="name" id="roundtripName" name="name" type="text" class="input-xlarge" required autofocus />
                          <p class="help-block" ng-show="newRoundtripForm.name.$error.required" th:text="#{Enter the name of your roundtrip}"></p>
                          <p class="help-block" ng-show="newRoundtripForm.name.$error.unused" th:text="#{The name is already used}"></p>
                        </div>
                      </div>
                    </fieldset>
                  </form>
                </div>
                <div class="modal-footer">
                  <button class="btn" ng-click="newRoundtripDialog.close()" th:text="#{Cancel}">Cancel</button>
                  <button href="#" id="saveRoundtripButton" class="btn btn-primary" ng-click="save()" ng-disabled="!isValid()" th:text="#{Save}">Save</button>
                </div>
              </div>
            </dialog>
            <!-- end create-roundtrip-dialog -->
          </div>
        </div>
        <!-- actual view body is rendered here whenever the url changes -->
        <div ng-view class="span9">
        </div>
      </div>
    </div>
    <footer th:substituteby="fragment/common :: footer" />
  </body>
</html>
